<script type="text/JavaScript">
    var boxxy = boxxy.initialize();

    function teamLi(team) {
        var name = team.name;
        if(name.includes("VEK")) {
            name = "ML & VEK";
        }
        if(name.includes("Politea")) {
            name = "Politeia";
        }
        return '<li data-team="' + team.id + '">' +
            '<span class="name">' + name + '</span>' +
            '<span class="laps">' + team.laps + '</span>' +
            '</li>'
    }

    boxxy.onUpdate = function() {
        var byScore = boxxy.teamsByScore();
        var byScoreLeft = byScore.slice(0, byScore.length / 2);
        var byScoreRight = byScore.slice(byScore.length / 2);
        $('#scoresresult-left').empty();
        var ol = $(document.createElement('ol'));
        for(var i in byScoreLeft) ol.append(teamLi(byScoreLeft[i]));
        $('#scoresresult-left').append(ol);

        $('#scoresresult-right').empty();
        var ol = $(document.createElement('ol'));
        ol.attr("start", (byScore.length / 2)+ 1);
        for(var i in byScoreRight) ol.append(teamLi(byScoreRight[i]));
        $('#scoresresult-right').append(ol);
    }

    boxxy.onPutState = function(newState) {
        /* Called when everything is (re)set */
    }   

    boxxy.onAddLap = function(lap) {
        var li = $('[data-team="' + lap.team.id + '"]');
        var up = $('<strong>' + ' +' + lap.count + '!' + '</strong>');
        li.append(up);
        up.fadeOut(5000);
    }

    boxxy.listen(boxxyHost);
</script>
<div style="font-weight: bold; font-size: 38px" class="row">
  <div id="scoresresult-left" class="scoresult-panels one-half column"><p>De scores worden geladen...</p></div>
  <div id="scoresresult-right" class="scoresult-panels one-half column offset-by-one"><p>De scores worden geladen...</p></div>
</div>
